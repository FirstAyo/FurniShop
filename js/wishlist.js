document.addEventListener("DOMContentLoaded", async () => { const grid = document.getElementById("wishlist-grid"); const list = JSON.parse(localStorage.getItem("wishlist") || "[]"); if (!list.length) { grid.innerHTML = "<p class='alert'>Your wishlist is empty.</p>"; return; } const products = await getProducts(); grid.innerHTML = ""; list.forEach(id => { const p = products.find(x => x.id === id); if (!p) return; const card = document.createElement("article"); card.className = "card"; card.innerHTML = ` <img src="${p.images[0]}" alt="${p.name}"> <div class="p-16"> <h3><a href="product.html?id=${p.id}">${p.name}</a></h3> <div class="price">${Shop.money(p.price)}</div> <div style="display:flex; gap:.5rem; margin-top:.5rem;"> <button class="icon-btn add">Add</button> <button class="icon-btn remove">Remove</button> </div> </div>`; card.querySelector(".add").addEventListener("click", ()=>Shop.addToCart({id:p.id, price:p.price, name:p.name, qty:1})); card.querySelector(".remove").addEventListener("click", ()=>{ let wl = JSON.parse(localStorage.getItem("wishlist") || "[]"); wl = wl.filter(x=>x!==p.id); localStorage.setItem("wishlist", JSON.stringify(wl)); location.reload(); }); grid.appendChild(card); }); });