document.addEventListener("DOMContentLoaded", async () => { const container = document.getElementById("product-detail"); const id = window.PRODUCT_ID || Number(Shop.getParam("id")); try { const products = await getProducts(); const p = products.find(x => x.id === id) || products[0]; container.innerHTML = ` <div class="hero-card"> <div style="display:grid;gap:1rem;grid-template-columns:1.2fr 1fr;"> <img src="${p.images[0]}" alt="${p.name}" style="width:100%;border-radius:var(--radius);border:1px solid var(--border)"> <div> <h1 class="main-title">${p.name}</h1> <div class="breadcrumbs">${p.category} • ⭐ ${p.rating} • In stock: ${p.stock}</div> <div class="price" style="font-size:1.4rem;margin:.5rem 0 1rem;">${Shop.money(p.price)}</div> <p>${p.description}</p> <div style="display:flex; gap:.5rem; margin:1rem 0;"> <button class="cta" id="buy">Add to Cart</button> <button class="icon-btn" id="wish">♡ Wishlist</button> </div> <table class="table"> <tr><th>Dimensions</th><td>${p.dimensions}</td></tr> <tr><th>Materials</th><td>${p.materials}</td></tr> <tr><th>Colors</th><td>${p.colors.join(", ")}</td></tr> </table> </div> </div> </div>`; document.getElementById("buy").addEventListener("click", () => { Shop.addToCart({id:p.id, price:p.price, name:p.name, qty:1}); document.getElementById("buy").textContent = "Added ✓"; }); const wishBtn = document.getElementById("wish"); wishBtn.addEventListener("click", () => { const active = Shop.toggleWishlist(p.id); wishBtn.textContent = active ? "♥ Wishlisted" : "♡ Wishlist"; }); } catch (e) { container.innerHTML = `<div class="alert">${e.message}</div>`; } });