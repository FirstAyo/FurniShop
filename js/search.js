document.addEventListener("DOMContentLoaded", async () => { const q = Shop.getParam("q") || ""; const input = document.getElementById("q"); const grid = document.getElementById("results"); input.value = q; const products = await getProducts(); function render(list) { grid.innerHTML = ""; list.forEach(p => { const el = document.createElement("article"); el.className = "card"; el.innerHTML = ` <img src="${p.images[0]}" alt="${p.name}"> <div class="p-16"> <h3><a href="product.html?id=${p.id}">${p.name}</a></h3> <div class="price">${Shop.money(p.price)}</div> </div>`; grid.appendChild(el); }); } function apply() { const term = (input.value || "").toLowerCase(); const list = products.filter(p => [p.name, p.category, p.description, ...(p.tags||[])].join(" ").toLowerCase().includes(term)); render(list); } input.addEventListener("input", apply); apply(); });